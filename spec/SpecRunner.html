<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Jasmine Spec Runner</title>
		<link rel="shortcut icon" type="image/png" href="libs/jasmine-1.2.0/jasmine_favicon.png">
		<link rel="stylesheet" type="text/css" href="libs/jasmine-1.2.0/jasmine.css">
		<script type="text/javascript" src="libs/jasmine-1.2.0/jasmine.js"></script>
		<script type="text/javascript" src="libs/jasmine-1.2.0/jasmine-html.js"></script>
		<script type="text/javascript" src="libs/sinon-1.3.4.js"></script>
		<script type="text/javascript" src="libs/jasmine-sinon.js"></script>

		<script type="text/javascript" src="../src/extensions/backbone/lib/require.js"></script>

		<!-- include source files here... -->
		<script type="text/javascript" src="js/mediator_spec.js"></script>

		<script type="text/javascript">
			require.config({
				baseUrl: '../',
                enforceDefine: true,
				shim: {
					'dom': {
						deps: ['jquery'],
						exports: '$'
					},
					'underscore': {
						exports: '_'
					},
					'backbone': {
						deps: ['underscore', 'dom'],
						exports: 'Backbone'
					}
				},
				paths: {
					jquery: 'src/aura/lib/jquery/jquery',
					dom: 'src/aura/lib/dom',

                    base: 'src/aura/base/jquery',
					core: 'src/extensions/backbone/core',
					perms: 'src/extensions/backbone/permissions',
					sandbox: 'src/extensions/backbone/sandbox',

					aura_core: 'src/aura/core',
					aura_perms: 'src/aura/permissions',
					aura_sandbox: 'src/aura/sandbox',

					text: 'src/extensions/backbone/lib/text',
					backbone: 'src/extensions/backbone/lib/backbone',
					localstorage: 'src/extensions/backbone/lib/localstorage',
					underscore: 'src/aura/lib/underscore',
					fullcalendar: 'src/extensions/backbone/lib/fullcalendar.min',
					jquery_ui: 'src/extensions/backbone/lib/jquery-ui.min'
				}
			});
			require(['core'], function (core) {

				window.core = core;

				var jasmineEnv = jasmine.getEnv();
				jasmineEnv.updateInterval = 1000;

				var htmlReporter = new jasmine.HtmlReporter();

				jasmineEnv.addReporter(htmlReporter);

				jasmineEnv.specFilter = function (spec) {
					return htmlReporter.specFilter(spec);
				};

				var currentWindowOnload = window.onload;

				window.onload = function () {
					if (currentWindowOnload) {
						currentWindowOnload();
					}
					execJasmine();
				};

				function execJasmine() {
					jasmineEnv.execute();
				}
			});
		</script>
	</head>
	<body>
	</body>
</html>
